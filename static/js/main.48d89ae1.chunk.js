(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[6],{19:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return j}));var r=n(3),c=n(2),a=Object(c.d)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},reducers:{setCredentials:function(e,t){var n=t.payload,r=n.user,c=n.token;e.user=r,e.token=c,e.isLoggedIn=!0},removeCredetials:function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1},setCurrentUser:function(e,t){var n=t.payload;e.user=Object(r.a)({},n),e.isLoggedIn=!0}},extraReducers:function(e){}});t.a=a.reducer;var i=a.actions,s=i.setCredentials,o=i.removeCredetials,u=i.setCurrentUser,d=function(e){return e.auth.isLoggedIn},l=function(e){return e.auth.user.name},j=function(e){return e.auth.token}},27:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u}));var r=n(29),c=n(13),a=Object(r.a)({reducerPath:"userApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["User"],endpoints:function(e){return{fetchCurrentUser:e.query({query:function(){return"/users/current"},providesTags:["User"]}),createUser:e.mutation({query:function(e){return{url:"/users/signup",method:"POST",body:{name:e.name,email:e.email,password:e.password}}},invalidatesTags:["User"]}),loginUser:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:{email:e.email,password:e.password}}},invalidatesTags:["User"]}),logoutUser:e.mutation({query:function(){return{url:"/users/logout",method:"POST"}},invalidatesTags:["User"]})}}}),i=a.useFetchCurrentUserQuery,s=a.useCreateUserMutation,o=a.useLoginUserMutation,u=a.useLogoutUserMutation},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(29),c=n(13),a=Object(r.a)({reducerPath:"contactApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contact"],endpoints:function(e){return{fetchContacts:e.query({query:function(){return"/contacts"},providesTags:["Contact"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contact"]}),createContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contact"]})}}}),i=a.useFetchContactsQuery,s=a.useDeleteContactMutation,o=a.useCreateContactMutation},88:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),i=n(24),s=n.n(i),o=n(21),u=n(8),d=n(49),l=n(54),j=n(14),b=n(2),h=n(13),O=n(34),f=n(27),p=n(19),g=n(25),m=n(50),x={key:"auth",storage:n.n(m).a,whitelist:["token"]},v=Object(b.a)({reducer:(r={auth:Object(g.g)(x,p.a)},Object(j.a)(r,O.a.reducerPath,O.a.reducer),Object(j.a)(r,f.e.reducerPath,f.e.reducer),r),middleware:function(e){return[].concat(Object(l.a)(e({serializableCheck:{ignoredActions:[g.a,g.f,g.b,g.c,g.d,g.e]}})),[O.a.middleware,f.e.middleware])},devTools:!1}),y=Object(g.h)(v);Object(h.e)(v.dispatch);var k=n(9),C=n(3),T=n(6),U=n(1),w=["children"],L=function(e){var t=e.children,n=Object(T.a)(e,w),r=Object(u.e)(p.b);return Object(U.jsx)(k.b,Object(C.a)(Object(C.a)({},n),{},{children:r?t:Object(U.jsx)(k.a,{to:"/login"})}))},P=["component","restricted","redirectTo","children"],S=function(e){e.component;var t=e.restricted,n=void 0!==t&&t,r=e.redirectTo,c=void 0===r?"/":r,a=e.children,i=Object(T.a)(e,P),s=Object(u.e)(p.b)&&n;return Object(U.jsx)(k.b,Object(C.a)(Object(C.a)({},i),{},{children:s?Object(U.jsx)(k.a,{to:c}):a}))},q=n(33),z=n.n(q),E=(n(45),n(41)),F=n.n(E),I=n(47),M=n(18),B=n(32),A=n(95),N=n(97),Q=n(96),D=(n(87),n(88),function(){var e=Object(u.d)(),t=Object(u.e)(p.b),n=Object(u.e)(p.d),r=Object(u.e)(p.c),a=Object(f.d)(),i=Object(M.a)(a,2),s=i[0],d=i[1].isLoading,l=Object(f.b)(null!==n&&void 0!==n?n:h.f).data,j="admin"===r;Object(c.useEffect)((function(){null!==n&&e(Object(p.g)(l))}),[e,l,n]);var b=function(){var t=Object(I.a)(F.a.mark((function t(){var n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s();case 3:n=t.sent,e(Object(p.e)(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(U.jsx)("div",{className:"header",children:Object(U.jsx)(A.a,{children:Object(U.jsxs)(B.a,{expand:"lg",bg:"nav",variant:"dark",children:[Object(U.jsx)(B.a.Brand,{as:o.b,to:"/",children:"Phonebook"}),Object(U.jsxs)(B.a.Collapse,{id:"responsive-navbar-nav",children:[t&&Object(U.jsxs)(N.a,{className:"me-auto",children:[Object(U.jsx)(N.a.Link,{as:o.b,to:"/contacts",children:"Contacts"}),j&&Object(U.jsx)(N.a.Link,{as:o.b,to:"/admin",children:"Admin"})]}),t?Object(U.jsxs)(N.a,{children:[Object(U.jsxs)(B.a.Text,{className:"nav-title",children:["Signed in as: ",Object(U.jsx)("a",{href:"/login",children:r})]}),Object(U.jsx)(Q.a,{type:"button",variant:"light",onClick:b,disabled:d,children:d?Object(U.jsx)(z.a,{type:"Circles",color:"#00BFFF",height:15,width:15}):"Exit"})]}):Object(U.jsxs)(N.a,{children:[Object(U.jsx)(N.a.Link,{as:o.b,to:"/login",children:"Log in"}),Object(U.jsx)(N.a.Link,{as:o.b,to:"/register",children:"Log up"})]})]})]})})})}),H=function(){return Object(U.jsx)(A.a,{children:Object(U.jsx)("p",{className:"home-text",children:"This is a home page"})})},J=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,112))})),R=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,111))})),G=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,113))})),K=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,114))})),V=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,115))})),W=function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(D,{}),Object(U.jsx)(c.Suspense,{fallback:Object(U.jsx)(z.a,{type:"Circles",color:"#383838",height:100,width:100}),children:Object(U.jsxs)(k.d,{children:[Object(U.jsx)(S,{path:"/",exact:!0,children:Object(U.jsx)(H,{})}),Object(U.jsxs)(L,{path:"/contacts",children:[Object(U.jsx)(J,{}),Object(U.jsx)(R,{})]}),Object(U.jsx)(L,{path:"/admin",children:Object(U.jsx)(G,{})}),Object(U.jsx)(S,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(U.jsx)(V,{})}),Object(U.jsx)(S,{path:"/register",restricted:!0,children:Object(U.jsx)(K,{})})]})})]})};n(91),n(92);s.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(u.a,{store:v,children:Object(U.jsx)(d.a,{loading:null,persistor:y,children:Object(U.jsx)(o.a,{children:Object(U.jsx)(W,{})})})})}),document.getElementById("root"))}},[[93,7,8]]]);
//# sourceMappingURL=main.48d89ae1.chunk.js.map